---
server:
  port: 8082
spring:
  application:
    name: "seed-system"
  profiles:
    active: "${SPRING_PROFILES_ACTIVE:dev}"
  threads:
    virtual:
      enabled: true
  cloud:
    nacos:
      username: "${NACOS_USERNAME:nacos}"
      password: "${NACOS_PASSWORD:nacos}"
      discovery:
        server-addr: "${NACOS_SERVER_ADDR:localhost:8848}"
        namespace: "${NACOS_NAMESPACE:}"
        # 开发环境下，网关实例注册为本机地址，防止服务发现时出现无法访问的问题
        ip: "${NACOS_DISCOVERY_IP:127.0.0.1}"
      config:
        enabled: "${NACOS_CONFIG_ENABLED:false}"
        server-addr: "${NACOS_SERVER_ADDR:localhost:8848}"
        namespace: "${NACOS_NAMESPACE:}"
        file-extension: yaml
        shared-configs:
          - data-id: application-shared.yaml
            group: DEFAULT_GROUP
            refresh: true
          - data-id: application-redis.yaml
            group: DEFAULT_GROUP
            refresh: true
    sentinel:
      transport:
        dashboard: "${SENTINEL_DASHBOARD:localhost:8858}"
      eager: true
  datasource:
    dynamic:
      primary: "master"
      strict: true
      datasource:
        master:
          driver-class-name: "org.postgresql.Driver"
          url: "jdbc:postgresql://${POSTGRES_HOST:localhost}:${POSTGRES_PORT:5432}/${POSTGRES_DATABASE:seed}"
          username: "${POSTGRES_USERNAME:postgres}"
          password: "${POSTGRES_PASSWORD:postgres}"
      druid:
        initial-size: 5
        min-idle: 5
        max-active: 20
        max-wait: 60000
  data:
    redis:
      host: "${REDIS_HOST:localhost}"
      port: "${REDIS_PORT:6379}"
      database: 0
      lettuce:
        pool:
          max-active: 16
          max-idle: 8
          min-idle: 2
          max-wait: "1000ms"
        shutdown-timeout: "100ms"
sa-token:
  token-name: "Authorization"
  timeout: 86400
  active-timeout: -1
  is-concurrent: true
  is-share: true
  token-prefix: "Bearer"
  is-read-header: true
  is-read-cookie: true
mybatis-plus:
  mapper-locations: "classpath*:mapper/**/*.xml"
  global-config:
    db-config:
      id-type: "auto"
      logic-delete-field: "deleted"
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true
    log-impl: "org.apache.ibatis.logging.slf4j.Slf4jImpl"
seed:
  security:
    inner-auth-secret: "${INNER_AUTH_SECRET:dev-inner-auth-secret-change-in-production}"
rpc:
  client:
    connect-timeout: 5000
    read-timeout: 10000
management:
  endpoints:
    web:
      exposure:
        include: "health,info,metrics"
springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    enabled: true
logging:
  level:
    '[com.zhangzhankui.seed]': "info"
